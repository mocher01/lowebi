# Production Database Configuration
NODE_ENV=production

# Primary Database (PostgreSQL)
DB_HOST=${PROD_DB_HOST}
DB_PORT=${PROD_DB_PORT:-5432}
DB_USERNAME=${PROD_DB_USERNAME}
DB_PASSWORD=${PROD_DB_PASSWORD}
DB_DATABASE=${PROD_DB_DATABASE:-website_generator}

# SSL Configuration (required for production)
DB_SSL_CA=${PROD_DB_SSL_CA}
DB_SSL_CERT=${PROD_DB_SSL_CERT}
DB_SSL_KEY=${PROD_DB_SSL_KEY}

# Migration Configuration
TYPEORM_MIGRATIONS_RUN=false  # Always run migrations manually in production
TYPEORM_LOGGING=false

# Production-specific optimizations
DB_POOL_SIZE=25
DB_CONNECTION_TIMEOUT=15000
DB_IDLE_TIMEOUT=300000  # 5 minutes
DB_STATEMENT_TIMEOUT=30000
DB_LOCK_TIMEOUT=10000

# High Availability Configuration
DB_READ_REPLICA_HOST=${PROD_DB_READ_REPLICA_HOST}
DB_READ_REPLICA_PORT=${PROD_DB_READ_REPLICA_PORT:-5432}
DB_READ_REPLICA_USERNAME=${PROD_DB_READ_REPLICA_USERNAME}
DB_READ_REPLICA_PASSWORD=${PROD_DB_READ_REPLICA_PASSWORD}

# Backup Configuration
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE="0 1 * * *"  # Daily at 1 AM
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_S3_BUCKET=${PROD_BACKUP_S3_BUCKET}

# Monitoring and Alerting
DB_MONITORING_ENABLED=true
DB_SLOW_QUERY_THRESHOLD=5000  # 5 seconds
DB_CONNECTION_ALERT_THRESHOLD=20  # Alert when 80% of connections used
DB_DISK_USAGE_ALERT_THRESHOLD=85  # Alert when 85% disk usage

# Security
DB_QUERY_LOGGING_ENABLED=false  # Disable query logging for security
DB_CONNECTION_ENCRYPTION=true
DB_ROW_LEVEL_SECURITY=true