(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3792:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),n=s(2115),r=s(5695),o=s(5766);function i(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)("admin@locod.ai"),[i,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{localStorage.getItem("adminToken")&&e.push("/dashboard")},[e]);let m=async s=>{s.preventDefault(),d(""),h(!0);try{var a,n;let s=await o.u.login(t,i),r=null==(n=s.user)||null==(a=n.role)?void 0:a.toLowerCase();if("admin"!==r)throw Error("Access denied. Admin privileges required.");localStorage.setItem("adminToken",s.accessToken),localStorage.setItem("refreshToken",s.refreshToken),localStorage.setItem("adminUser",JSON.stringify(s.user)),console.log("✅ Admin login successful:",s.user.email),e.push("/dashboard")}catch(e){console.error("❌ Login error:",e.message),d(e.message||"Authentication failed. Please check your credentials.")}finally{h(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 font-sans",children:(0,a.jsxs)("div",{className:"min-h-screen flex flex-col justify-center px-4 py-12 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-indigo-600 rounded-xl flex items-center justify-center text-white text-2xl font-bold shadow-lg",children:"LA"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"LOGEN Admin Portal"}),(0,a.jsx)("p",{className:"text-lg text-slate-600",children:"Acc\xe8s administratif s\xe9curis\xe9 pour g\xe9rer la g\xe9n\xe9ration de contenu IA"})]}),(0,a.jsx)("div",{className:"mx-auto w-full max-w-xs",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-200",children:[(0,a.jsxs)("form",{onSubmit:m,children:[c&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-6 flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"⚠️"}),c]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:e=>s(e.target.value),placeholder:"admin@locod.ai",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-3 focus:ring-indigo-100 focus:border-indigo-600 transition-all duration-200"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de Passe"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:e=>l(e.target.value),placeholder:"Entrez votre mot de passe s\xe9curis\xe9",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-3 focus:ring-indigo-100 focus:border-indigo-600 transition-all duration-200"})]}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"w-full flex justify-center items-center px-4 py-3 text-white border-0 rounded-lg text-sm font-semibold transition-all duration-200 ".concat(u?"bg-gray-400 cursor-not-allowed opacity-50":"bg-indigo-600 cursor-pointer hover:bg-indigo-700 hover:-translate-y-0.5 hover:shadow-lg"),children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mr-2",children:"⏳"}),"Authentification..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDD10"}),"Acc\xe9der au Portail Admin"]})})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 m-0 flex items-center justify-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDEE1️"}),"S\xe9curis\xe9 avec un chiffrement de niveau entreprise"]})})]})}),(0,a.jsx)("div",{className:"text-center mt-8",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"\xa9 2024 LOGEN. L'acc\xe8s administratif est surveill\xe9 et enregistr\xe9."})})]})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},5766:(e,t,s)=>{"use strict";s.d(t,{u:()=>n});class a{getBaseURL(){{let e=window.location.hostname;if("localhost"===e||"127.0.0.1"===e);else if("admin.logen.locod-ai.com"===e)return"";else if("logen.locod-ai.com"===e)return"";else if(e.includes("162.55.213.90"))return"http://162.55.213.90:7600"}return"http://localhost:7600"}getAuthHeaders(){let e=localStorage.getItem("adminToken");return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}}async handleResponse(e){if(!e.ok){let t=(await e.json().catch(()=>({message:"Network error"}))).message||"HTTP ".concat(e.status);if(console.error("API Error: ".concat(e.status," ").concat(e.statusText," - ").concat(t)),console.error("Request URL: ".concat(e.url)),401===e.status){let e=localStorage.getItem("adminToken");console.error("Token present: ".concat(!!e,", length: ").concat((null==e?void 0:e.length)||0))}throw Error(t)}return e.json()}async login(e,t){let s=await fetch("".concat(this.baseURL,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});return this.handleResponse(s)}async refreshToken(e){let t=await fetch("".concat(this.baseURL,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});return this.handleResponse(t)}async getQueueStats(){let e=await fetch("".concat(this.baseURL,"/admin/queue/stats"),{headers:this.getAuthHeaders()});return this.handleResponse(e)}async getQueue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new URLSearchParams({page:e.toString(),limit:t.toString(),...Object.fromEntries(Object.entries(s).filter(e=>{let[t,s]=e;return void 0!==s&&""!==s}))});console.log("\uD83D\uDD0D Fetching queue: ".concat(this.baseURL,"/admin/queue?").concat(a));let n=this.getAuthHeaders();console.log("Headers:",Object.keys(n));let r=await fetch("".concat(this.baseURL,"/admin/queue?").concat(a),{headers:n});return this.handleResponse(r)}async getRequest(e){let t=await fetch("".concat(this.baseURL,"/admin/queue/").concat(e),{headers:this.getAuthHeaders()});return this.handleResponse(t)}async assignRequest(e){let t=await fetch("".concat(this.baseURL,"/admin/queue/").concat(e,"/assign"),{method:"PUT",headers:this.getAuthHeaders()});return this.handleResponse(t)}async startProcessing(e){let t=await fetch("".concat(this.baseURL,"/admin/queue/").concat(e,"/start"),{method:"PUT",headers:this.getAuthHeaders()});return this.handleResponse(t)}async completeRequest(e,t){let s=await fetch("".concat(this.baseURL,"/admin/queue/").concat(e,"/complete"),{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({generatedContent:t.content})});return this.handleResponse(s)}async rejectRequest(e,t){let s=await fetch("".concat(this.baseURL,"/admin/queue/").concat(e,"/reject"),{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({reason:t})});return this.handleResponse(s)}async getSystemHealth(){let e=await fetch("".concat(this.baseURL,"/admin/system/health"),{headers:this.getAuthHeaders()});return this.handleResponse(e)}async getDashboardStats(){let[e]=await Promise.all([this.getQueueStats()]);return{customers:{total:0,active:0},sites:{total:0,active:0},aiQueue:e,systemHealth:{status:"Healthy"}}}constructor(){this.baseURL=this.getBaseURL()}}let n=new a},7161:(e,t,s)=>{Promise.resolve().then(s.bind(s,3792))}},e=>{e.O(0,[441,964,358],()=>e(e.s=7161)),_N_E=e.O()}]);