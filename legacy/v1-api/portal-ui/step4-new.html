<!-- Step 4: Images & Assets SIMPLIFIE -->
<div x-show="currentStep === 4" x-transition class="wizard-step p-8">
    <h2 class="text-2xl font-bold mb-6">Images et Visuels</h2>
    <p class="text-gray-600 mb-8">Choisissez comment cr√©er les images de votre site</p>

    <!-- R√©sum√© des images n√©cessaires -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
        <h3 class="font-semibold text-blue-900 mb-2">Images n√©cessaires pour votre site :</h3>
        <div class="grid grid-cols-2 gap-2 text-sm text-blue-800">
            <div>‚Ä¢ Logo navigation (clair)</div>
            <div>‚Ä¢ Logo footer (sombre)</div>
            <div>‚Ä¢ Image banni√®re hero</div>
            <div>‚Ä¢ Favicons (clair & sombre)</div>
            <div>‚Ä¢ <span x-text="wizardData.services?.length || 0"></span> images pour vos <span x-text="wizardData.terminology || 'services'"></span></div>
            <div x-show="wizardData.blog?.articles?.length > 0">‚Ä¢ <span x-text="wizardData.blog?.articles?.length || 0"></span> images d'articles</div>
        </div>
    </div>

    <!-- Choix simplifi√© -->
    <div class="space-y-4">
        <!-- Option 1: Upload manuel -->
        <div class="border-2 rounded-lg p-6 cursor-pointer transition-all"
             :class="wizardData.imageApproach === 'manual' ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'"
             @click="selectImageApproach('manual')">
            <div class="flex items-start space-x-4">
                <div class="flex-shrink-0">
                    <input type="radio" :checked="wizardData.imageApproach === 'manual'" class="mt-1">
                </div>
                <div class="flex-1">
                    <h4 class="font-semibold text-lg mb-1">J'ai d√©j√† mes images</h4>
                    <p class="text-gray-600 text-sm">Uploadez vos propres logos et images maintenant</p>
                    <div class="mt-2 text-green-600 font-medium text-sm">‚úì Imm√©diat et gratuit</div>
                </div>
            </div>
            
            <!-- Upload interface si s√©lectionn√© -->
            <div x-show="wizardData.imageApproach === 'manual'" x-transition class="mt-6 border-t pt-6">
                <div class="grid grid-cols-2 gap-4">
                    <!-- Logo principal -->
                    <div>
                        <label class="block text-sm font-medium mb-2">Logo principal (navigation)</label>
                        <div @drop="handleFileDrop($event, 'logo')" 
                             @dragover.prevent 
                             class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 cursor-pointer h-32 flex items-center justify-center"
                             @click="$refs.manualLogoInput.click()">
                            <template x-if="!wizardData.images.logo">
                                <div class="text-gray-400">
                                    <svg class="w-8 h-8 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <p class="text-xs">Cliquez ou glissez</p>
                                </div>
                            </template>
                            <template x-if="wizardData.images.logo">
                                <div>
                                    <img :src="wizardData.images.logo" class="max-h-20 mx-auto">
                                    <p class="text-xs text-green-600 mt-1">‚úì Upload√©</p>
                                </div>
                            </template>
                        </div>
                        <input type="file" x-ref="manualLogoInput" @change="handleFileUpload($event, 'logo')" accept="image/*" class="hidden">
                    </div>
                    
                    <!-- Les autres images suivent le m√™me pattern... -->
                    <div>
                        <label class="block text-sm font-medium mb-2">Image banni√®re</label>
                        <div @drop="handleFileDrop($event, 'hero')" 
                             @dragover.prevent 
                             class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 cursor-pointer h-32 flex items-center justify-center"
                             @click="$refs.manualHeroInput.click()">
                            <template x-if="!wizardData.images.hero">
                                <div class="text-gray-400">
                                    <svg class="w-8 h-8 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <p class="text-xs">Banni√®re hero</p>
                                </div>
                            </template>
                            <template x-if="wizardData.images.hero">
                                <div>
                                    <img :src="wizardData.images.hero" class="max-h-20 mx-auto">
                                    <p class="text-xs text-green-600 mt-1">‚úì Upload√©</p>
                                </div>
                            </template>
                        </div>
                        <input type="file" x-ref="manualHeroInput" @change="handleFileUpload($event, 'hero')" accept="image/*" class="hidden">
                    </div>
                </div>
                
                <p class="text-sm text-gray-500 mt-4">
                    üí° Vous pourrez uploader les autres images (services, blog) plus tard
                </p>
            </div>
        </div>

        <!-- Option 2: G√©n√©ration IA -->
        <div class="border-2 rounded-lg p-6 cursor-pointer transition-all"
             :class="wizardData.imageApproach === 'ai' ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-gray-300'"
             @click="selectImageApproach('ai')">
            <div class="flex items-start space-x-4">
                <div class="flex-shrink-0">
                    <input type="radio" :checked="wizardData.imageApproach === 'ai'" class="mt-1">
                </div>
                <div class="flex-1">
                    <h4 class="font-semibold text-lg mb-1">G√©n√©rer mes images par IA</h4>
                    <p class="text-gray-600 text-sm">Un expert cr√©era toutes vos images selon votre activit√©</p>
                    <div class="mt-2 text-purple-600 font-medium text-sm">üé® Cr√©ation professionnelle</div>
                </div>
            </div>
            
            <!-- Options IA si s√©lectionn√© -->
            <div x-show="wizardData.imageApproach === 'ai'" x-transition class="mt-6 border-t pt-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Style visuel souhait√©</label>
                        <select x-model="wizardData.aiStyle" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="modern">Moderne et √©pur√©</option>
                            <option value="professional">Professionnel corporate</option>
                            <option value="creative">Cr√©atif et artistique</option>
                            <option value="warm">Chaleureux et accessible</option>
                        </select>
                    </div>
                    
                    <button @click="requestImageGeneration()" 
                            :disabled="imageAiRequest.status === 'processing'"
                            class="w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 disabled:opacity-50">
                        <span x-show="!imageAiRequest.id">üé® Demander la g√©n√©ration de toutes les images</span>
                        <span x-show="imageAiRequest.status === 'pending'">‚è≥ En attente de traitement...</span>
                        <span x-show="imageAiRequest.status === 'processing'">üé® G√©n√©ration en cours...</span>
                        <span x-show="imageAiRequest.status === 'completed'">‚úÖ Images pr√™tes !</span>
                    </button>
                    
                    <div x-show="imageAiRequest.id" class="bg-purple-100 rounded-lg p-3 text-sm">
                        <p class="text-purple-800">
                            Demande #<span x-text="imageAiRequest.id"></span> cr√©√©e.
                            Un expert va g√©n√©rer vos images et les int√©grer directement √† votre site.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Option 3: Approche mixte -->
        <div class="border-2 rounded-lg p-6 cursor-pointer transition-all"
             :class="wizardData.imageApproach === 'mixed' ? 'border-orange-500 bg-orange-50' : 'border-gray-200 hover:border-gray-300'"
             @click="selectImageApproach('mixed')">
            <div class="flex items-start space-x-4">
                <div class="flex-shrink-0">
                    <input type="radio" :checked="wizardData.imageApproach === 'mixed'" class="mt-1">
                </div>
                <div class="flex-1">
                    <h4 class="font-semibold text-lg mb-1">Approche mixte</h4>
                    <p class="text-gray-600 text-sm">Uploadez certaines images et g√©n√©rez les autres par IA</p>
                    <div class="mt-2 text-orange-600 font-medium text-sm">üîÑ Flexible</div>
                </div>
            </div>
            
            <!-- Interface mixte si s√©lectionn√© -->
            <div x-show="wizardData.imageApproach === 'mixed'" x-transition class="mt-6 border-t pt-6">
                <p class="text-sm text-gray-600 mb-4">Pour chaque image, choisissez :</p>
                
                <div class="space-y-3">
                    <!-- Logo -->
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                        <span class="text-sm font-medium">Logo navigation</span>
                        <div class="flex space-x-2">
                            <button @click="setImageChoice('logo', 'upload'); $refs.mixedLogoInput.click()" 
                                    :class="wizardData.imageChoices.logo === 'upload' ? 'bg-blue-600 text-white' : 'bg-gray-200'"
                                    class="px-3 py-1 rounded text-sm">
                                <span x-show="!wizardData.images.logo">Upload</span>
                                <span x-show="wizardData.images.logo">‚úì Upload√©</span>
                            </button>
                            <button @click="setImageChoice('logo', 'ai')"
                                    :class="wizardData.imageChoices.logo === 'ai' ? 'bg-purple-600 text-white' : 'bg-gray-200'"
                                    class="px-3 py-1 rounded text-sm">
                                IA
                            </button>
                        </div>
                        <input type="file" x-ref="mixedLogoInput" @change="handleFileUpload($event, 'logo')" accept="image/*" class="hidden">
                    </div>
                    
                    <!-- Hero -->
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                        <span class="text-sm font-medium">Image banni√®re</span>
                        <div class="flex space-x-2">
                            <button @click="setImageChoice('hero', 'upload'); $refs.mixedHeroInput.click()" 
                                    :class="wizardData.imageChoices.hero === 'upload' ? 'bg-blue-600 text-white' : 'bg-gray-200'"
                                    class="px-3 py-1 rounded text-sm">
                                <span x-show="!wizardData.images.hero">Upload</span>
                                <span x-show="wizardData.images.hero">‚úì Upload√©</span>
                            </button>
                            <button @click="setImageChoice('hero', 'ai')"
                                    :class="wizardData.imageChoices.hero === 'ai' ? 'bg-purple-600 text-white' : 'bg-gray-200'"
                                    class="px-3 py-1 rounded text-sm">
                                IA
                            </button>
                        </div>
                        <input type="file" x-ref="mixedHeroInput" @change="handleFileUpload($event, 'hero')" accept="image/*" class="hidden">
                    </div>
                    
                    <!-- Autres images... -->
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                        <span class="text-sm font-medium">Autres images (footer, favicons, services)</span>
                        <div class="flex space-x-2">
                            <button @click="setOtherImagesChoice('upload')" 
                                    :class="wizardData.otherImagesChoice === 'upload' ? 'bg-blue-600 text-white' : 'bg-gray-200'"
                                    class="px-3 py-1 rounded text-sm">
                                Upload
                            </button>
                            <button @click="setOtherImagesChoice('ai')"
                                    :class="wizardData.otherImagesChoice === 'ai' ? 'bg-purple-600 text-white' : 'bg-gray-200'"
                                    class="px-3 py-1 rounded text-sm">
                                IA
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Bouton pour g√©n√©rer les images IA manquantes -->
                <button x-show="hasAIChoices()" 
                        @click="requestImageGeneration()" 
                        class="mt-4 w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                    üé® G√©n√©rer les images marqu√©es "IA"
                </button>
            </div>
        </div>
    </div>

    <!-- Message d'information -->
    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
        <p class="text-sm text-gray-600">
            <strong>Note :</strong> Les images g√©n√©r√©es par IA seront automatiquement renomm√©es et optimis√©es pour votre site.
            Vous pourrez les modifier ult√©rieurement dans votre espace d'administration.
        </p>
    </div>
</div>